{% extends "base.html" %}

{% comment %} Author: Evan {% endcomment %}
{% comment %} HTMX: This page does not contain specific HTMX functionality. It's a standard sign-up form
      that collects user information and submits it via a regular page load. {% endcomment %}


{% block body_class %}logged-out{% endblock %}

{% block content %}
<div class="logged-out-header">
  <a href="{% url 'home' %}">Charger Circle</a>
</div>

<div class="content-wrapper">
  <div class="card">
    <h2 style="text-align: center; border-bottom: none; margin-bottom: 1.5rem;">Sign Up</h2>
    <form method="post">
      {% csrf_token %}

      {# This will display non-field errors like 'passwords do not match' #}
      {% if form.non_field_errors %}
        <div class="form-errors">
          {% for error in form.non_field_errors %}
            <span>{{ error }}</span>
          {% endfor %}
        </div>
      {% endif %}

      {% for field in form %}
        <div class="form-group">
          {{ field.label_tag }}
          {{ field }}
          
          {# This handles the password validation rules #}
          {% if field.help_text %}
            <div class="form-help-text">{{ field.help_text|safe }}</div>
          {% endif %}
          
          {# This handles errors for a specific field, like 'email already exists' #}
          {% for error in field.errors %}
            <div class="form-field-error">{{ error }}</div>
          {% endfor %}
        </div>
      {% endfor %}
      
      <button type="submit" class="btn btn-primary" style="width: 100%;">Sign Up</button>
    </form>
  </div>
  <div class="auth-links">
    <p><a href="{% url 'login' %}" class="auth-link">Already have an account? Log In</a></p>
  </div>
</div>
{% endblock content %}
