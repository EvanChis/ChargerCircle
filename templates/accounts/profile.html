{% extends "base.html" %}

{% block content %}
<div class="content-wrapper">
  
  <div class="profile-header">
    {% if profile_user.profile.main_image_url %}
      <img src="{{ profile_user.profile.main_image_url }}" alt="{{ profile_user.first_name }}'s profile picture" class="profile-main-image">
    {% else %}
      <div class="profile-main-image-placeholder">
        <span>{{ profile_user.first_name.0 }}</span>
      </div>
    {% endif %}
    
    <div class="profile-info">
      <h2>{{ profile_user.first_name }} {{ profile_user.last_name }}</h2>
      
      {% if profile_user == request.user %}
        <a href="{% url 'edit_profile' %}" class="btn btn-secondary">Edit Profile</a>
        <a href="{% url 'logout' %}" class="btn btn-secondary btn-danger">Logout</a>
      {% else %}
        <a href="{% url 'conversation' thread_id=thread.pk %}" class="btn btn-primary">Message</a>
      {% endif %}
    </div>
  </div>

  <p class="profile-bio">{{ profile_user.profile.bio|default:"This user hasn't written a bio yet." }}</p>

  {% if profile_user.courses.all %}
    <div class="course-tags">
      {% for course in profile_user.courses.all %}
        {% if course.slug != 'hang-out' %}
          <span class="course-tag">{{ course.name }}</span>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}

  {% if profile_images %}
    <h3 style="margin-top: 2rem;">Pictures</h3>
    <div class="card">
      <div class="image-gallery">
        {% for img in profile_images %}
          <div class="image-thumbnail-container">
            <img src="{{ img.image.url }}" alt="Profile image {{ forloop.counter }}" class="profile-image-thumb {% if img.is_main %}is-main{% endif %}">
          </div>
        {% endfor %}
      </div>
    </div>
  {% endif %}
  
</div>
{% endblock content %}
