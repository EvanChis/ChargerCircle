{% comment %} Author: Evan and Oju {% endcomment %}
{% comment %} HTMX: This partial file displays a list of recent "skip" or "like" actions. Each item has an "Undo" button that uses an HTMX POST request to reverse the action
      and remove the item from the list without a page reload. {% endcomment %}

<ul class="styled-list" id="undo-list">
    {% for skipped in last_skipped %}
      {# The ID on this LI is no longer needed for HTMX swaps #}
      <li class="card undo-card">
        <span>You {{ skipped.action_type }}d <strong>{{ skipped.skipped_user.first_name }} {{ skipped.skipped_user.last_name }}</strong></span>
        
        {# This form is now for a simple POST, the HTMX attributes can be removed #}
        <form hx-post="{% url 'undo_action' pk=skipped.pk %}"
              hx-target="closest li"
              hx-swap="delete">
          {% csrf_token %}
          <button type="submit" class="btn btn-secondary btn-sm">Undo</button>
        </form>
      </li>
    {% empty %}
        <div class="card" id="no-undo-message">
            <p>You have no recent actions to undo.</p>
        </div>
    {% endfor %}
</ul>
